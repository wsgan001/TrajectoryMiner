<!DOCTYPE html><html><head>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=12ff805e268ff3ad2ea4574770872473"></script>    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>    <title>热力图功能示例</title>    <style type="text/css">		ul,li{list-style: none;margin:0;padding:0;float:left;}		html{height:100%}		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}		#container{height:500px;width:100%;}		#r-result{width:100%;}    </style>	</head><body>	<div id="container"></div>	<div id="r-result">		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>	</div></body></html><script type="text/javascript">    var map = new BMap.Map("container");    var point = new BMap.Point(116.418261, 39.921984);    map.centerAndZoom(point, 15);    map.enableScrollWheelZoom();      var points =[{"lng":121.35222,"lat":31.07187,"count":100.0},{"lng":121.42067,"lat":31.10593,"count":100.0},{"lng":121.78802,"lat":31.16785,"count":100.0},{"lng":121.33417,"lat":31.17144,"count":100.0},{"lng":121.28781,"lat":31.22304,"count":100.0},{"lng":121.42073,"lat":31.29077,"count":100.0},{"lng":121.35880,"lat":31.08326,"count":100.0},{"lng":121.32264,"lat":31.21684,"count":100.0},{"lng":121.44912,"lat":31.30058,"count":100.0},{"lng":121.26567,"lat":31.20947,"count":100.0},{"lng":121.34030,"lat":31.17703,"count":100.0},{"lng":121.37681,"lat":31.11200,"count":100.0},{"lng":121.37224,"lat":31.09017,"count":100.0},{"lng":121.42059,"lat":31.10580,"count":100.0},{"lng":121.38094,"lat":31.10628,"count":100.0},{"lng":121.19802,"lat":31.23991,"count":100.0},{"lng":121.38161,"lat":31.10996,"count":100.0},{"lng":121.33572,"lat":31.17210,"count":100.0},{"lng":121.49647,"lat":31.29468,"count":100.0},{"lng":121.40724,"lat":31.01476,"count":100.0},{"lng":121.34038,"lat":31.17666,"count":100.0},{"lng":121.79158,"lat":31.16531,"count":100.0},{"lng":121.38893,"lat":31.22694,"count":100.0},{"lng":121.33597,"lat":31.17222,"count":100.0},{"lng":121.35709,"lat":31.06941,"count":100.0},{"lng":121.28827,"lat":31.22429,"count":100.0},{"lng":121.35246,"lat":31.07136,"count":100.0},{"lng":121.19792,"lat":31.24024,"count":100.0},{"lng":121.33979,"lat":31.17286,"count":100.0},{"lng":121.35665,"lat":31.06880,"count":100.0},{"lng":121.79205,"lat":31.16565,"count":100.0},{"lng":121.36935,"lat":31.24072,"count":100.0},{"lng":121.33158,"lat":31.17427,"count":100.0},{"lng":121.37949,"lat":31.08953,"count":100.0},{"lng":121.38603,"lat":31.23775,"count":100.0},{"lng":121.30022,"lat":31.21407,"count":100.0},{"lng":121.29276,"lat":31.22207,"count":100.0},{"lng":121.29227,"lat":31.22142,"count":100.0},{"lng":121.29225,"lat":31.22128,"count":100.0},{"lng":121.63828,"lat":31.19083,"count":100.0},{"lng":121.29780,"lat":31.22696,"count":100.0},{"lng":0.00000,"lat":0.00000,"count":400.0},{"lng":121.38600,"lat":31.23771,"count":100.0},{"lng":121.42511,"lat":31.28912,"count":100.0},{"lng":121.39364,"lat":31.22488,"count":100.0},{"lng":121.38589,"lat":31.08626,"count":100.0},{"lng":121.38823,"lat":31.11019,"count":100.0},{"lng":121.36464,"lat":31.19609,"count":100.0},{"lng":121.33086,"lat":31.17392,"count":100.0},{"lng":121.45035,"lat":31.30506,"count":100.0},{"lng":121.42057,"lat":31.10552,"count":100.0},{"lng":121.33082,"lat":31.17393,"count":100.0},{"lng":121.37814,"lat":31.11064,"count":100.0},{"lng":121.32050,"lat":31.21275,"count":100.0},{"lng":121.35703,"lat":31.06902,"count":100.0},{"lng":121.78802,"lat":31.16805,"count":100.0},{"lng":121.33548,"lat":31.17202,"count":100.0},{"lng":121.79943,"lat":31.16247,"count":100.0},{"lng":121.35254,"lat":31.07091,"count":100.0},{"lng":121.31809,"lat":31.19248,"count":100.0},{"lng":121.44189,"lat":31.19186,"count":100.0},{"lng":121.36296,"lat":31.13017,"count":100.0},{"lng":121.18238,"lat":31.21294,"count":100.0},{"lng":121.38143,"lat":31.10981,"count":100.0},{"lng":121.31591,"lat":31.22323,"count":100.0},{"lng":121.05429,"lat":31.11073,"count":100.0},{"lng":121.79242,"lat":31.16587,"count":100.0},{"lng":121.35665,"lat":31.06872,"count":100.0},{"lng":121.32049,"lat":31.23384,"count":100.0},{"lng":121.39714,"lat":31.16050,"count":100.0},{"lng":121.37287,"lat":31.09958,"count":100.0},{"lng":121.42567,"lat":31.27181,"count":100.0},{"lng":121.37770,"lat":31.11269,"count":100.0},{"lng":121.32273,"lat":31.21698,"count":100.0},{"lng":121.36036,"lat":31.06937,"count":100.0},{"lng":121.38164,"lat":31.10971,"count":100.0},{"lng":121.31114,"lat":31.22519,"count":100.0},{"lng":121.32725,"lat":31.21540,"count":100.0},{"lng":121.33163,"lat":31.17431,"count":100.0},{"lng":121.37865,"lat":31.10956,"count":100.0},{"lng":121.28830,"lat":31.22409,"count":100.0},{"lng":121.79573,"lat":31.16370,"count":100.0},{"lng":121.53103,"lat":31.31003,"count":100.0},{"lng":121.38463,"lat":31.23788,"count":100.0},{"lng":121.41586,"lat":31.10775,"count":100.0},{"lng":121.33014,"lat":31.22826,"count":100.0},{"lng":121.32706,"lat":31.21126,"count":100.0},{"lng":121.32270,"lat":31.21757,"count":100.0},{"lng":121.33074,"lat":31.17384,"count":100.0},{"lng":121.79364,"lat":31.16431,"count":100.0},{"lng":121.38805,"lat":31.22438,"count":100.0},{"lng":121.36033,"lat":31.23288,"count":100.0},{"lng":121.41602,"lat":31.10766,"count":100.0},{"lng":121.36553,"lat":31.23178,"count":100.0},{"lng":121.79611,"lat":31.16314,"count":100.0},{"lng":121.35662,"lat":31.06880,"count":100.0},{"lng":121.79205,"lat":31.16433,"count":100.0},{"lng":121.36097,"lat":31.23364,"count":100.0},{"lng":121.37743,"lat":31.11114,"count":100.0},{"lng":121.37675,"lat":31.11686,"count":100.0},{"lng":121.38462,"lat":31.08644,"count":100.0},{"lng":121.37702,"lat":31.11187,"count":100.0},{"lng":121.19802,"lat":31.24030,"count":100.0},{"lng":121.38284,"lat":31.09544,"count":100.0},{"lng":121.36929,"lat":31.18921,"count":100.0}];       if(!isSupportCanvas()){    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')    }	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});	map.addOverlay(heatmapOverlay);	heatmapOverlay.setDataSet({data:points,max:100});    function openHeatmap(){        heatmapOverlay.show();    }	function closeHeatmap(){        heatmapOverlay.hide();    }	openHeatmap();    function setGradient(){     	var gradient = {};     	var colors = document.querySelectorAll("input[type='color']");     	colors = [].slice.call(colors,0);     	colors.forEach(function(ele){			gradient[ele.getAttribute("data-key")] = ele.value;      	});        heatmapOverlay.setOptions({"gradient":gradient});    }    function isSupportCanvas(){        var elem = document.createElement('canvas');        return !!(elem.getContext && elem.getContext('2d'));    }</script>