<!DOCTYPE html><html><head>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=12ff805e268ff3ad2ea4574770872473"></script>    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>    <title>热力图功能示例</title>    <style type="text/css">		ul,li{list-style: none;margin:0;padding:0;float:left;}		html{height:100%}		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}		#container{height:500px;width:100%;}		#r-result{width:100%;}    </style>	</head><body>	<div id="container"></div>	<div id="r-result">		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>	</div></body></html><script type="text/javascript">    var map = new BMap.Map("container");    var point = new BMap.Point(116.418261, 39.921984);    map.centerAndZoom(point, 15);    map.enableScrollWheelZoom();      var points =[{"lng":121.68683,"lat":31.17389,"count":100.0},{"lng":121.64074,"lat":31.23800,"count":100.0},{"lng":121.61635,"lat":31.27344,"count":100.0},{"lng":121.69223,"lat":31.17259,"count":100.0},{"lng":121.79529,"lat":31.16482,"count":100.0},{"lng":121.62911,"lat":31.19856,"count":100.0},{"lng":121.69103,"lat":31.17200,"count":100.0},{"lng":121.66707,"lat":31.19850,"count":100.0},{"lng":121.69101,"lat":31.17206,"count":100.0},{"lng":121.68642,"lat":31.17486,"count":100.0},{"lng":121.80035,"lat":31.16127,"count":100.0},{"lng":121.69148,"lat":31.17185,"count":100.0},{"lng":121.68671,"lat":31.17399,"count":100.0},{"lng":121.68646,"lat":31.17381,"count":100.0},{"lng":121.80026,"lat":31.16131,"count":100.0},{"lng":121.70358,"lat":31.19941,"count":100.0},{"lng":121.73913,"lat":31.17216,"count":100.0},{"lng":121.68238,"lat":31.19933,"count":100.0},{"lng":121.68076,"lat":31.19321,"count":100.0},{"lng":121.79572,"lat":31.16343,"count":100.0},{"lng":121.79551,"lat":31.16341,"count":100.0},{"lng":121.69136,"lat":31.17166,"count":100.0},{"lng":121.79537,"lat":31.16481,"count":100.0},{"lng":121.79565,"lat":31.16381,"count":100.0},{"lng":121.79991,"lat":31.16132,"count":100.0},{"lng":121.80491,"lat":31.15212,"count":100.0},{"lng":121.69264,"lat":31.17177,"count":100.0},{"lng":121.80004,"lat":31.16166,"count":100.0},{"lng":121.68689,"lat":31.17384,"count":100.0},{"lng":121.73433,"lat":31.05550,"count":100.0},{"lng":121.79558,"lat":31.16342,"count":100.0},{"lng":121.79832,"lat":31.16235,"count":100.0},{"lng":121.69460,"lat":31.18714,"count":100.0},{"lng":121.79551,"lat":31.16358,"count":100.0},{"lng":121.47954,"lat":31.19391,"count":100.0},{"lng":121.68296,"lat":31.18781,"count":100.0},{"lng":121.69241,"lat":31.17192,"count":100.0},{"lng":121.79318,"lat":31.16723,"count":100.0},{"lng":121.58468,"lat":31.27174,"count":100.0},{"lng":121.79562,"lat":31.16339,"count":100.0},{"lng":121.68804,"lat":31.17440,"count":100.0},{"lng":121.69140,"lat":31.17951,"count":100.0},{"lng":121.69234,"lat":31.17219,"count":100.0},{"lng":121.68837,"lat":31.17390,"count":100.0},{"lng":121.64406,"lat":31.02376,"count":100.0},{"lng":121.79840,"lat":31.16210,"count":100.0},{"lng":121.68442,"lat":31.20063,"count":100.0},{"lng":0.00000,"lat":0.00000,"count":100.0},{"lng":121.55658,"lat":31.23248,"count":100.0},{"lng":121.69219,"lat":31.17245,"count":100.0},{"lng":121.67892,"lat":31.19929,"count":100.0},{"lng":121.79953,"lat":31.16239,"count":100.0},{"lng":121.47513,"lat":31.19587,"count":100.0},{"lng":121.80273,"lat":31.16002,"count":100.0},{"lng":121.62682,"lat":31.20162,"count":100.0},{"lng":121.69268,"lat":31.18763,"count":100.0},{"lng":121.55236,"lat":31.29857,"count":100.0},{"lng":121.68759,"lat":31.17305,"count":100.0},{"lng":121.79279,"lat":31.16790,"count":100.0},{"lng":121.51443,"lat":31.16063,"count":100.0},{"lng":121.69185,"lat":31.17335,"count":100.0},{"lng":121.74013,"lat":31.17710,"count":100.0},{"lng":121.69238,"lat":31.17235,"count":100.0},{"lng":121.80025,"lat":31.16131,"count":100.0},{"lng":121.79562,"lat":31.16344,"count":100.0},{"lng":121.69143,"lat":31.17215,"count":100.0},{"lng":121.69122,"lat":31.17173,"count":100.0},{"lng":121.69241,"lat":31.17209,"count":100.0},{"lng":121.68666,"lat":31.17395,"count":100.0},{"lng":121.50117,"lat":31.24351,"count":100.0},{"lng":121.79594,"lat":31.16340,"count":100.0},{"lng":121.79559,"lat":31.16342,"count":100.0},{"lng":121.75632,"lat":31.15832,"count":100.0},{"lng":121.79552,"lat":31.16338,"count":100.0},{"lng":121.79554,"lat":31.16401,"count":100.0},{"lng":121.79546,"lat":31.16325,"count":100.0},{"lng":121.65048,"lat":31.21435,"count":100.0},{"lng":121.65359,"lat":31.28611,"count":100.0},{"lng":121.68397,"lat":31.18816,"count":100.0},{"lng":121.72015,"lat":31.20259,"count":100.0},{"lng":121.44491,"lat":31.25432,"count":100.0},{"lng":121.68730,"lat":31.16914,"count":100.0},{"lng":121.69062,"lat":31.17194,"count":100.0},{"lng":121.68742,"lat":31.17554,"count":100.0},{"lng":121.69145,"lat":31.17204,"count":100.0},{"lng":121.42292,"lat":31.23369,"count":100.0},{"lng":121.79531,"lat":31.16435,"count":100.0},{"lng":121.69226,"lat":31.17229,"count":100.0},{"lng":121.80016,"lat":31.16144,"count":100.0},{"lng":121.79974,"lat":31.16131,"count":100.0},{"lng":121.79486,"lat":31.16023,"count":100.0},{"lng":121.70651,"lat":31.18499,"count":100.0},{"lng":121.49770,"lat":31.17243,"count":100.0},{"lng":121.74464,"lat":31.17474,"count":100.0},{"lng":121.68290,"lat":31.18777,"count":100.0},{"lng":121.68694,"lat":31.17360,"count":100.0},{"lng":121.79566,"lat":31.16363,"count":100.0},{"lng":121.69243,"lat":31.17190,"count":100.0},{"lng":121.80014,"lat":31.16153,"count":100.0},{"lng":121.79547,"lat":31.16488,"count":100.0},{"lng":121.69150,"lat":31.17189,"count":100.0},{"lng":121.67950,"lat":31.19839,"count":100.0},{"lng":121.69224,"lat":31.17251,"count":100.0},{"lng":121.79975,"lat":31.16110,"count":100.0},{"lng":121.69284,"lat":31.17145,"count":100.0},{"lng":121.67682,"lat":31.19978,"count":100.0},{"lng":121.69109,"lat":31.17175,"count":100.0},{"lng":121.69109,"lat":31.17178,"count":100.0},{"lng":121.69194,"lat":31.17255,"count":100.0},{"lng":121.68740,"lat":31.17456,"count":100.0},{"lng":121.56144,"lat":31.15508,"count":100.0},{"lng":121.75506,"lat":31.04352,"count":100.0},{"lng":121.69231,"lat":31.17199,"count":100.0},{"lng":121.68940,"lat":31.16992,"count":100.0}];       if(!isSupportCanvas()){    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')    }	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});	map.addOverlay(heatmapOverlay);	heatmapOverlay.setDataSet({data:points,max:100});    function openHeatmap(){        heatmapOverlay.show();    }	function closeHeatmap(){        heatmapOverlay.hide();    }	openHeatmap();    function setGradient(){     	var gradient = {};     	var colors = document.querySelectorAll("input[type='color']");     	colors = [].slice.call(colors,0);     	colors.forEach(function(ele){			gradient[ele.getAttribute("data-key")] = ele.value;      	});        heatmapOverlay.setOptions({"gradient":gradient});    }    function isSupportCanvas(){        var elem = document.createElement('canvas');        return !!(elem.getContext && elem.getContext('2d'));    }</script>