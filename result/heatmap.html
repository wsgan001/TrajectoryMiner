<!DOCTYPE html><html><head>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=12ff805e268ff3ad2ea4574770872473"></script>    <script type="text/javascript" src="http://api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js"></script>    <title>热力图功能示例</title>    <style type="text/css">		ul,li{list-style: none;margin:0;padding:0;float:left;}		html{height:100%}		body{height:100%;margin:0px;padding:0px;font-family:"微软雅黑";}		#container{height:500px;width:100%;}		#r-result{width:100%;}    </style>	</head><body>	<div id="container"></div>	<div id="r-result">		<input type="button"  onclick="openHeatmap();" value="显示热力图"/><input type="button"  onclick="closeHeatmap();" value="关闭热力图"/>	</div></body></html><script type="text/javascript">    var map = new BMap.Map("container");    var point = new BMap.Point(116.418261, 39.921984);    map.centerAndZoom(point, 15);    map.enableScrollWheelZoom();      var points =[{"lng":121.35023,"lat":31.29691,"count":100.0},{"lng":120.02727,"lat":31.81656,"count":100.0},{"lng":120.60226,"lat":31.51300,"count":100.0},{"lng":121.32124,"lat":31.18325,"count":100.0},{"lng":121.42669,"lat":31.34954,"count":100.0},{"lng":121.04668,"lat":31.38542,"count":100.0},{"lng":121.32272,"lat":31.18345,"count":100.0},{"lng":121.79166,"lat":31.16502,"count":100.0},{"lng":120.69570,"lat":31.32639,"count":100.0},{"lng":121.32481,"lat":31.18421,"count":100.0},{"lng":121.44914,"lat":31.28168,"count":100.0},{"lng":121.48080,"lat":31.23405,"count":100.0},{"lng":121.46689,"lat":31.20649,"count":100.0},{"lng":121.79603,"lat":31.16270,"count":100.0},{"lng":121.81921,"lat":31.11598,"count":100.0},{"lng":121.80346,"lat":31.15187,"count":100.0},{"lng":121.49621,"lat":31.23738,"count":100.0},{"lng":121.78855,"lat":31.17378,"count":100.0},{"lng":120.49262,"lat":30.74065,"count":100.0},{"lng":121.81495,"lat":31.11512,"count":100.0},{"lng":121.79144,"lat":31.16969,"count":100.0},{"lng":121.42608,"lat":31.34946,"count":100.0},{"lng":121.32283,"lat":31.18353,"count":100.0},{"lng":121.43072,"lat":31.34773,"count":100.0},{"lng":121.49966,"lat":31.24331,"count":100.0},{"lng":121.32686,"lat":31.19296,"count":100.0},{"lng":121.32228,"lat":31.19503,"count":100.0},{"lng":121.32258,"lat":31.18351,"count":100.0},{"lng":121.80342,"lat":31.15200,"count":100.0},{"lng":121.42606,"lat":31.34946,"count":100.0},{"lng":121.81915,"lat":31.11600,"count":100.0},{"lng":121.80398,"lat":31.15135,"count":100.0},{"lng":121.33812,"lat":31.17213,"count":100.0},{"lng":121.79632,"lat":31.16223,"count":100.0},{"lng":121.40632,"lat":31.19793,"count":100.0},{"lng":121.82057,"lat":31.11496,"count":100.0},{"lng":121.50257,"lat":31.23193,"count":100.0},{"lng":121.44130,"lat":31.28104,"count":100.0},{"lng":121.49722,"lat":31.23369,"count":100.0},{"lng":121.43076,"lat":31.34773,"count":100.0},{"lng":120.66521,"lat":31.10184,"count":100.0},{"lng":120.70000,"lat":31.32436,"count":100.0},{"lng":121.81320,"lat":31.13018,"count":100.0},{"lng":121.79054,"lat":31.16806,"count":100.0},{"lng":121.42194,"lat":31.22504,"count":100.0},{"lng":121.44362,"lat":31.31754,"count":100.0},{"lng":121.43068,"lat":31.34780,"count":100.0},{"lng":120.60233,"lat":31.51300,"count":100.0},{"lng":121.82156,"lat":31.11310,"count":100.0},{"lng":121.32703,"lat":31.18145,"count":100.0},{"lng":121.06626,"lat":31.38993,"count":100.0},{"lng":121.35646,"lat":31.39505,"count":100.0},{"lng":121.38901,"lat":31.22645,"count":100.0},{"lng":121.39349,"lat":31.22408,"count":100.0},{"lng":121.32180,"lat":31.19490,"count":100.0},{"lng":121.45734,"lat":31.22605,"count":100.0},{"lng":121.79623,"lat":31.16248,"count":100.0},{"lng":121.43060,"lat":31.34780,"count":100.0},{"lng":121.34941,"lat":31.24366,"count":100.0},{"lng":121.50126,"lat":31.23666,"count":100.0},{"lng":121.43075,"lat":31.34765,"count":100.0},{"lng":121.44004,"lat":31.33972,"count":100.0},{"lng":121.32740,"lat":31.18159,"count":100.0},{"lng":120.83626,"lat":31.34274,"count":100.0},{"lng":121.32298,"lat":31.17849,"count":100.0},{"lng":121.50679,"lat":31.22817,"count":100.0},{"lng":0.00000,"lat":0.00000,"count":200.0},{"lng":121.42477,"lat":31.23771,"count":100.0},{"lng":120.88555,"lat":31.33235,"count":100.0},{"lng":121.42612,"lat":31.34954,"count":100.0},{"lng":120.88588,"lat":31.33065,"count":100.0}];       if(!isSupportCanvas()){    	alert('热力图目前只支持有canvas支持的浏览器,您所使用的浏览器不能使用热力图功能~')    }	heatmapOverlay = new BMapLib.HeatmapOverlay({"radius":20});	map.addOverlay(heatmapOverlay);	heatmapOverlay.setDataSet({data:points,max:100});    function openHeatmap(){        heatmapOverlay.show();    }	function closeHeatmap(){        heatmapOverlay.hide();    }	openHeatmap();    function setGradient(){     	var gradient = {};     	var colors = document.querySelectorAll("input[type='color']");     	colors = [].slice.call(colors,0);     	colors.forEach(function(ele){			gradient[ele.getAttribute("data-key")] = ele.value;      	});        heatmapOverlay.setOptions({"gradient":gradient});    }    function isSupportCanvas(){        var elem = document.createElement('canvas');        return !!(elem.getContext && elem.getContext('2d'));    }</script>